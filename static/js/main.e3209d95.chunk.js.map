{"version":3,"sources":["components/utilities/NumFormatter.js","components/CallOut.js","components/Error.js","components/Point.js","components/Map.js","components/Header.js","components/Footer.js","components/App.js","index.js"],"names":["NumFormatter","props","style","display","num","toString","replace","CallOut","state","countryCode","total","deaths","recovered","init","prevProps","axios","get","process","encodeURIComponent","lat","lon","then","res","data","json","results","components","setState","getCountryDataFromCode","updateErrorStatus","catch","err","console","log","this","confirmed","value","className","React","Component","Error","render","closeError","onErrorDismiss","onClick","Point","x","y","mercN","latRad","renderCallOut","renderCallOutBottom","error","_","getLon","coordinates","getMercN","getLatRad","getLat","PI","Math","atan","pow","Object","keys","length","left","top","Map","width","height","zoom","handleClick","e","clientX","clientY","domRect","currentTarget","getBoundingClientRect","domRectX","domRectY","maxWidth","src","split","alt","Header","Footer","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e3209d95.chunk.js","sourcesContent":["import React from 'react';\n\nconst NumFormatter = props => {\n    return <div style={{display: 'inline-block'}}>{props.num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}</div>\n}\n\nexport default NumFormatter;","import React from 'react';\nimport NumFormatter from './utilities/NumFormatter';\nimport axios from 'axios';\n\nclass CallOut extends React.Component{\n    \n    state = {\n        countryCode: null,\n        total: null,\n        deaths: null,\n        recovered: null\n    }\n\n    componentDidMount(){\n        this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.lat !== prevProps.lat || this.props.lon !== prevProps.lon) {\n            this.init(prevProps);\n        }\n      }\n\n    init = (prevProps = {}) => {\n        axios.get(`https://api.opencagedata.com/geocode/v1/json?key=${process.env.REACT_APP_OPENCAGE_API_KEY}&q=${encodeURIComponent(this.props.lat + ',' + this.props.lon)}&pretty=1&no_annotations=1`)\n        .then(res => res.data)\n        .then(json =>{\n            if(!json.results[0].components['ISO_3166-1_alpha-3']){\n                this.props.updateErrorStatus(prevProps);\n            }else{\n                this.setState({countryCode: json.results[0].components['ISO_3166-1_alpha-3']});\n                this.getCountryDataFromCode(this.state.countryCode);\n            }\n        })\n        .catch(err => {\n            this.props.updateErrorStatus(prevProps);\n            console.log(err);\n        });\n    }\n\n    getCountryDataFromCode(countryCode){\n        axios.get(`https://covid19.mathdro.id/api/countries/${countryCode}`)\n        .then(res => res.data)\n        .then(json => {\n            this.setState({total: json.confirmed.value, recovered: json.recovered.value, deaths: json.deaths.value});\n        })\n        .catch(err => console.log(err)); \n    }\n\n    render(){\n        return(\n            <div className=\"callOut\">\n                <div className=\"callOut_wrapper\">\n                    <div className=\"callOut_country\">{this.state.countryCode}</div>\n                    <div className=\"callOut_total\"><span>Total:</span> {this.state.total ? <NumFormatter num={this.state.total} />: ''}</div>\n                    <div className=\"callOut_deaths\"><span>Deaths:</span> {this.state.total ? <NumFormatter num={this.state.deaths} />: ''}</div>\n                    <div className=\"callOut_recovered\"><span>Recov:</span> {this.state.total ? <NumFormatter num={this.state.recovered} />: ''}</div>\n                    <div className=\"callOut_triangle\"></div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CallOut;","import React from 'react';\n\nclass Error extends React.Component{\n    state = {\n        render: true\n    }\n\n    closeError = () => {\n        this.setState({ render: false });\n        this.props.onErrorDismiss();\n    }\n\n    render(){\n        if(!this.state.render){\n            return false;\n        }else{\n            return(\n                <div className=\"error\">\n                    <button onClick={this.closeError} className=\"error_btn\">&times;</button>\n                    Error, looks like you clicked on water.\n                </div>\n            )\n        }\n    }\n}\n\nexport default Error;","import React from 'react';\nimport CallOut from './CallOut';\nimport Error from './Error';\n\n//TODO: In this component, get y coordinate position relative to parent, if y <= 80 (to allow buffer), add class bottom\n\nclass Point extends React.Component{\n\n    state = {\n        x: 0,\n        y: 0,\n        lon: 0,\n        lat: 0,\n        mercN: 0,\n        latRad: 0,\n        renderCallOut: false,\n        renderCallOutBottom: false,\n        error: false\n    }\n\n    componentDidMount(){\n       this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.coordinates[0] !== prevProps.coordinates[0] || this.props.coordinates[1] !== prevProps.coordinates[1]) {\n            this.init();\n        }\n      }\n\n    init = _ => {\n        const lon = this.getLon(this.props.coordinates[0]);\n        const mercN = this.getMercN(this.props.coordinates[1]);\n        const latRad = this.getLatRad(mercN);\n        const lat = this.getLat(latRad);\n        const renderCallOutBottom = this.props.coordinates[1] <= 80 ? true : false;\n        this.setState({x:  this.props.coordinates[0], y:  this.props.coordinates[1], lon, mercN, latRad, lat, renderCallOut: true, renderCallOutBottom});\n    }\n\n    getLon = x => {\n        const lon = x * 360 / 1024 - 180;\n        return lon;\n    }\n\n    getMercN = y => {\n        const mercN = (y - 256) * this.props.PI / - 512;\n        return mercN;\n    }\n\n    getLatRad = mercN => {\n        //since we are working with base e\n        const eulersNum = 2.7182818284590452353602874713527;\n        const latRad = (Math.atan(Math.pow(eulersNum, mercN)) - (this.props.PI / 4)) * 2;\n        return latRad;\n    }\n\n    getLat = latRad => {\n        const lat = latRad * 180 / this.props.PI;\n        return lat;\n    }\n\n    updateErrorStatus = (prevProps) => {\n        if(!Object.keys(prevProps).length){\n            //set default city to Toronto\n            this.setState({ error: true, x: 286.227, y: 117.366, lat: 43.741667, lon: -79.373333 });\n        }else{\n            this.setState({ error: true, x: prevProps.x, y: prevProps.y, lat: prevProps.lat, lon: prevProps.lon });\n        }\n    }\n\n    onErrorDismiss = () => {\n        this.setState({ error: false });\n    }\n\n    render(){\n        if(this.state.error){\n            return(\n                <Error onErrorDismiss={this.onErrorDismiss}/>\n            )\n        }else{\n            return(\n                <div className=\"point\" style={{ left: this.state.x + 'px', top: this.state.y + 'px'}}>\n                    <div  className={`point_wrapper ${this.state.renderCallOutBottom ? 'bottom' : ''}`}>\n                        {this.state.renderCallOut ? <CallOut x={this.state.x} y={this.state.y} lat={this.state.lat} lon={this.state.lon} updateErrorStatus={this.updateErrorStatus} /> : ''}\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default Point; ","import React from 'react';\nimport Point from './Point';\n\nclass Map extends React.Component {\n\n    state = {\n        width: 1024,\n        height: 512,\n        zoom: 1,\n        x: null,\n        y: null,\n        PI: Math.PI\n    }\n\n    handleClick = (e) =>{\n        const clientX = e.clientX;\n        const clientY = e.clientY;\n        const domRect = e.currentTarget.getBoundingClientRect();\n        const [domRectX, domRectY ] = [domRect.x, domRect.y];\n        this.setState({x: clientX - domRectX, y: clientY - domRectY});\n    }\n\n    render(){\n        return(\n            <div className=\"map\" style={{maxWidth: this.state.width}}>\n                <img onClick={this.handleClick} src={`https://api.mapbox.com/styles/v1/mapbox/dark-v9/static/0,0,${this.state.zoom}/${this.state.width}x${this.state.height}?access_token=${process.env.REACT_APP_MAPBOX_API_KEY.split(';')[0]}`} alt=\"World Map.\" className=\"map_img\" />\n                { this.state.x && this.state.y ? <Point coordinates={[this.state.x, this.state.y]} PI={this.state.PI}/> : '' }\n            </div>\n        )\n    }\n}\n\nexport default Map;","import React from 'react';\n\nconst Header = () => {\n    return(\n        <header>\n            <h1>Covid-19 Tracker</h1>\n        </header>\n    )\n}\n\nexport default Header;","import React from 'react';\n\nconst Footer = () => {\n    return(\n        <footer>\n            <span className=\"copyright\">\n                Made with <i className=\"fa fa-heart\"></i> by Eric Smith\n            </span>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from 'react';\nimport Map from './Map';\nimport Header from './Header';\nimport Footer from './Footer';\nimport '../styles.scss';\n\nclass App extends React.Component {\n\n    render(){\n        return(\n            <div>\n                <Header />\n                    <div className=\"container\">\n                        <Map />\n                    </div>\n                <Footer />\n            </div>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}