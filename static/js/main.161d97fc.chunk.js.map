{"version":3,"sources":["components/utilities/NumFormatter.js","components/CallOut.js","components/Error.js","components/Point.js","components/Map.js","components/Header.js","components/Footer.js","components/App.js","index.js"],"names":["NumFormatter","props","style","display","num","toString","replace","CallOut","state","countryCode","total","deaths","recovered","init","prevProps","axios","get","lat","lon","process","then","res","data","text","setState","getCountryDataFromCode","catch","err","updateErrorStatus","console","log","this","json","confirmed","value","className","React","Component","Error","render","closeError","onErrorDismiss","onClick","Point","x","y","mercN","latRad","renderCallOut","renderCallOutBottom","error","_","getLon","coordinates","getMercN","getLatRad","getLat","PI","Math","atan","pow","Object","keys","length","left","top","Map","width","height","zoom","handleClick","e","clientX","clientY","domRect","currentTarget","getBoundingClientRect","domRectX","domRectY","maxWidth","src","split","alt","Header","Footer","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.161d97fc.chunk.js","sourcesContent":["import React from 'react';\n\nconst NumFormatter = props => {\n    return <div style={{display: 'inline-block'}}>{props.num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}</div>\n}\n\nexport default NumFormatter;","import React from 'react';\nimport NumFormatter from './utilities/NumFormatter';\nimport axios from 'axios';\n\nclass CallOut extends React.Component{\n    \n    state = {\n        countryCode: null,\n        total: null,\n        deaths: null,\n        recovered: null\n    }\n\n    componentDidMount(){\n        this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.lat !== prevProps.lat || this.props.lon !== prevProps.lon) {\n            this.init(prevProps);\n        }\n      }\n\n    init = (prevProps = {}) => {\n            axios.get(`http://api.geonames.org/countryCode?lat=${this.props.lat}&lng=${this.props.lon}&username=${process.env.REACT_APP_MAPBOX_GEONAMES_API_USER}`)\n                .then(res => res.data)\n                .then(text =>{\n                    this.setState({countryCode: text});\n                    this.getCountryDataFromCode(this.state.countryCode);\n                })\n                .catch(err => {\n                    this.props.updateErrorStatus(prevProps);\n                    console.log(err);\n                });\n    }\n\n    getCountryDataFromCode(countryCode){\n        axios.get(`https://covid19.mathdro.id/api/countries/${countryCode}`)\n        .then(res => res.data)\n        .then(json => {\n            this.setState({total: json.confirmed.value, recovered: json.recovered.value, deaths: json.deaths.value});\n        })\n        .catch(err => console.log(err)); \n    }\n\n    render(){\n        return(\n            <div className=\"callOut\">\n                <div className=\"callOut_wrapper\">\n                    <div className=\"callOut_country\">{this.state.countryCode}</div>\n                    <div className=\"callOut_total\"><span>Total:</span> {this.state.total ? <NumFormatter num={this.state.total} />: ''}</div>\n                    <div className=\"callOut_deaths\"><span>Deaths:</span> {this.state.total ? <NumFormatter num={this.state.deaths} />: ''}</div>\n                    <div className=\"callOut_recovered\"><span>Recov:</span> {this.state.total ? <NumFormatter num={this.state.recovered} />: ''}</div>\n                    <div className=\"callOut_triangle\"></div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CallOut;","import React from 'react';\n\nclass Error extends React.Component{\n    state = {\n        render: true\n    }\n\n    closeError = () => {\n        this.setState({ render: false });\n        this.props.onErrorDismiss();\n    }\n\n    render(){\n        if(!this.state.render){\n            return false;\n        }else{\n            return(\n                <div className=\"error\">\n                    <button onClick={this.closeError} className=\"error_btn\">&times;</button>\n                    Error, looks like you clicked on water.\n                </div>\n            )\n        }\n    }\n}\n\nexport default Error;","import React from 'react';\nimport CallOut from './CallOut';\nimport Error from './Error';\n\n//TODO: In this component, get y coordinate position relative to parent, if y <= 80 (to allow buffer), add class bottom\n\nclass Point extends React.Component{\n\n    state = {\n        x: 0,\n        y: 0,\n        lon: 0,\n        lat: 0,\n        mercN: 0,\n        latRad: 0,\n        renderCallOut: false,\n        renderCallOutBottom: false,\n        error: false\n    }\n\n    componentDidMount(){\n       this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.coordinates[0] !== prevProps.coordinates[0] || this.props.coordinates[1] !== prevProps.coordinates[1]) {\n            this.init();\n        }\n      }\n\n    init = _ => {\n        const lon = this.getLon(this.props.coordinates[0]);\n        const mercN = this.getMercN(this.props.coordinates[1]);\n        const latRad = this.getLatRad(mercN);\n        const lat = this.getLat(latRad);\n        const renderCallOutBottom = this.props.coordinates[1] <= 80 ? true : false;\n        this.setState({x:  this.props.coordinates[0], y:  this.props.coordinates[1], lon, mercN, latRad, lat, renderCallOut: true, renderCallOutBottom});\n    }\n\n    getLon = x => {\n        const lon = x * 360 / 1024 - 180;\n        return lon;\n    }\n\n    getMercN = y => {\n        const mercN = (y - 256) * this.props.PI / - 512;\n        return mercN;\n    }\n\n    getLatRad = mercN => {\n        //since we are working with base e\n        const eulersNum = 2.7182818284590452353602874713527;\n        const latRad = (Math.atan(Math.pow(eulersNum, mercN)) - (this.props.PI / 4)) * 2;\n        return latRad;\n    }\n\n    getLat = latRad => {\n        const lat = latRad * 180 / this.props.PI;\n        return lat;\n    }\n\n    updateErrorStatus = (prevProps) => {\n        if(!Object.keys(prevProps).length){\n            //set default city to Toronto\n            this.setState({ error: true, x: 286.227, y: 117.366, lat: 43.741667, lon: -79.373333 });\n        }else{\n            this.setState({ error: true, x: prevProps.x, y: prevProps.y, lat: prevProps.lat, lon: prevProps.lon });\n        }\n    }\n\n    onErrorDismiss = () => {\n        this.setState({ error: false });\n    }\n\n    render(){\n        if(this.state.error){\n            return(\n                <Error onErrorDismiss={this.onErrorDismiss}/>\n            )\n        }else{\n            return(\n                <div className=\"point\" style={{ left: this.state.x + 'px', top: this.state.y + 'px'}}>\n                    <div  className={`point_wrapper ${this.state.renderCallOutBottom ? 'bottom' : ''}`}>\n                        {this.state.renderCallOut ? <CallOut x={this.state.x} y={this.state.y} lat={this.state.lat} lon={this.state.lon} updateErrorStatus={this.updateErrorStatus} /> : ''}\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default Point; ","import React from 'react';\nimport Point from './Point';\n\nclass Map extends React.Component {\n\n    state = {\n        width: 1024,\n        height: 512,\n        zoom: 1,\n        x: null,\n        y: null,\n        PI: Math.PI\n    }\n\n    handleClick = (e) =>{\n        const clientX = e.clientX;\n        const clientY = e.clientY;\n        const domRect = e.currentTarget.getBoundingClientRect();\n        const [domRectX, domRectY ] = [domRect.x, domRect.y];\n        this.setState({x: clientX - domRectX, y: clientY - domRectY});\n    }\n\n    render(){\n        return(\n            <div className=\"map\" style={{maxWidth: this.state.width}}>\n                <img onClick={this.handleClick} src={`https://api.mapbox.com/styles/v1/mapbox/dark-v9/static/0,0,${this.state.zoom}/${this.state.width}x${this.state.height}?access_token=${process.env.REACT_APP_MAPBOX_API_KEY.split(';')[0]}`} alt=\"World Map.\" className=\"map_img\" />\n                { this.state.x && this.state.y ? <Point coordinates={[this.state.x, this.state.y]} PI={this.state.PI}/> : '' }\n            </div>\n        )\n    }\n}\n\nexport default Map;","import React from 'react';\n\nconst Header = () => {\n    return(\n        <header>\n            <h1>Covid-19 Tracker</h1>\n        </header>\n    )\n}\n\nexport default Header;","import React from 'react';\n\nconst Footer = () => {\n    return(\n        <footer>\n            <span className=\"copyright\">\n                Made with <i className=\"fa fa-heart\"></i> by Eric Smith\n            </span>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from 'react';\nimport Map from './Map';\nimport Header from './Header';\nimport Footer from './Footer';\nimport '../styles.scss';\n\nclass App extends React.Component {\n\n    render(){\n        return(\n            <div>\n                <Header />\n                    <div className=\"container\">\n                        <Map />\n                    </div>\n                <Footer />\n            </div>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}