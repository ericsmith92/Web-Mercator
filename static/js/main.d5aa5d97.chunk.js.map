{"version":3,"sources":["components/utilities/NumFormatter.js","components/CallOut.js","components/Error.js","components/Point.js","components/Map.js","components/Header.js","components/Accordion.js","components/Footer.js","components/App.js","index.js"],"names":["NumFormatter","props","style","display","num","toString","replace","CallOut","state","countryCode","total","deaths","recovered","init","prevProps","axios","get","process","encodeURIComponent","lat","lon","then","res","data","json","results","components","setState","getCountryDataFromCode","updateErrorStatus","catch","err","console","log","closeCallOut","this","confirmed","value","className","onClick","React","Component","Error","render","closeError","onErrorDismiss","ReactDOM","createPortal","text","document","getElementById","Point","x","y","mercN","latRad","renderCallOut","error","errorMsg","_","getLon","coordinates","getMercN","getLatRad","getLat","PI","Math","atan","pow","msg","Object","keys","length","left","top","Map","width","height","zoom","handleClick","e","clientX","clientY","domRect","currentTarget","getBoundingClientRect","domRectX","domRectY","maxWidth","src","split","alt","Header","Accordion","collapsed","toggleAccordion","Footer","App"],"mappings":"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","file":"static/js/main.d5aa5d97.chunk.js","sourcesContent":["import React from 'react';\n\nconst NumFormatter = props => {\n    return <div style={{display: 'inline-block'}}>{props.num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')}</div>\n}\n\nexport default NumFormatter;","import React from 'react';\nimport NumFormatter from './utilities/NumFormatter';\nimport axios from 'axios';\n\nclass CallOut extends React.Component{\n    \n    state = {\n        countryCode: null,\n        total: null,\n        deaths: null,\n        recovered: null\n    }\n\n    componentDidMount(){\n        this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.lat !== prevProps.lat || this.props.lon !== prevProps.lon) {\n            this.init(prevProps);\n        }\n      }\n\n    init = (prevProps = {}) => {\n        axios.get(`https://api.opencagedata.com/geocode/v1/json?key=${process.env.REACT_APP_OPENCAGE_API_KEY}&q=${encodeURIComponent(this.props.lat + ',' + this.props.lon)}&pretty=1&no_annotations=1`)\n        .then(res => res.data)\n        .then(json =>{\n            if(!json.results[0].components['ISO_3166-1_alpha-2']){\n                this.props.updateErrorStatus(prevProps, 'Error, looks like you clicked on water.');\n            }else{\n                const countryCode = json.results[0].components['ISO_3166-1_alpha-2'];\n                this.setState({countryCode});\n                this.getCountryDataFromCode(this.state.countryCode, prevProps);\n            }\n        })\n        .catch(err => {\n            this.props.updateErrorStatus(prevProps, 'Error, looks like you clicked on water.');\n            console.log(err);\n        });\n    }\n\n    getCountryDataFromCode(countryCode, prevProps){\n        axios.get(`https://covid19.mathdro.id/api/countries/${countryCode}`)\n        .then(res => res.data)\n        .then(json => {\n            this.setState({total: json.confirmed.value, recovered: json.recovered.value, deaths: json.deaths.value});\n        })\n        .catch(err => {\n            this.props.updateErrorStatus(prevProps, `Error, unable to fetch data for country code ${countryCode}.`);\n            console.log(err);\n        }); \n    }\n\n    closeCallOut = () => {\n        this.setState({ \n            countryCode: null,\n            total: null,\n            deaths: null,\n            recovered: null });\n        this.props.closeCallOut();\n    }\n\n    render(){\n        return(\n            <div className=\"callOut\">\n                <div className=\"callOut_wrapper\">\n                    <button className=\"callOut_close\" onClick={this.closeCallOut}>&times;</button>\n                    <div className=\"callOut_country\">{this.state.countryCode}</div>\n                    <div className=\"callOut_total\"><span>Total:</span> {this.state.total ? <NumFormatter num={this.state.total} />: ''}</div>\n                    <div className=\"callOut_deaths\"><span>Deaths:</span> {this.state.total ? <NumFormatter num={this.state.deaths} />: ''}</div>\n                    <div className=\"callOut_recovered\"><span>Recov:</span> {this.state.total ? <NumFormatter num={this.state.recovered} />: ''}</div>\n                    <div className=\"callOut_triangle\"></div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default CallOut;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Error extends React.Component{\n    state = {\n        render: true\n    }\n\n    closeError = () => {\n        this.setState({ render: false });\n        this.props.onErrorDismiss();\n    }\n\n    render(){\n        if(!this.state.render){\n            return false;\n        }else{\n            return ReactDOM.createPortal(\n                <div className=\"error\">\n                    <div className=\"error_inner\">\n                        <button onClick={this.closeError} className=\"error_btn\">&times;</button>\n                        {this.props.text}\n                    </div>\n                </div>,\n                document.getElementById('modal')\n            )\n        }\n    }\n}\n\nexport default Error;","import React from 'react';\nimport CallOut from './CallOut';\nimport Error from './Error';\n\nclass Point extends React.Component{\n\n    state = {\n        x: 0,\n        y: 0,\n        lon: 0,\n        lat: 0,\n        mercN: 0,\n        latRad: 0,\n        renderCallOut: false,\n        error: false,\n        errorMsg: ''\n    }\n\n    componentDidMount(){\n       this.init();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.coordinates[0] !== prevProps.coordinates[0] || this.props.coordinates[1] !== prevProps.coordinates[1]) {\n            this.init();\n        }\n      }\n\n    init = _ => {\n        const lon = this.getLon(this.props.coordinates[0]);\n        const mercN = this.getMercN(this.props.coordinates[1]);\n        const latRad = this.getLatRad(mercN);\n        const lat = this.getLat(latRad);\n        this.setState({x:  this.props.coordinates[0], y:  this.props.coordinates[1], lon, mercN, latRad, lat, renderCallOut: true});\n    }\n\n    getLon = x => {\n        const lon = x * 360 / 1024 - 180;\n        return lon;\n    }\n\n    getMercN = y => {\n        const mercN = (y - 256) * this.props.PI / - 512;\n        return mercN;\n    }\n\n    getLatRad = mercN => {\n        //since we are working with base e\n        const eulersNum = 2.7182818284590452353602874713527;\n        const latRad = (Math.atan(Math.pow(eulersNum, mercN)) - (this.props.PI / 4)) * 2;\n        return latRad;\n    }\n\n    getLat = latRad => {\n        const lat = latRad * 180 / this.props.PI;\n        return lat;\n    }\n\n    updateErrorStatus = (prevProps, msg) => {\n        if(!Object.keys(prevProps).length){\n            //set default city to Toronto\n            this.setState({ error: true, x: 286.227, y: 117.366, lat: 43.741667, lon: -79.373333, errorMsg:  msg});\n        }else{\n            this.setState({ error: true, x: prevProps.x, y: prevProps.y, lat: prevProps.lat, lon: prevProps.lon, errorMsg:  msg});\n        }\n    }\n\n    closeCallOut = () => {\n        this.setState({ \n            x: null,\n            y: null,\n            lon: 0,\n            lat: 0,\n            mercN: 0,\n            latRad: 0,\n            renderCallOut: false,\n            error: false,\n            errorMsg: ''\n        });\n    }\n\n    onErrorDismiss = () => {\n        this.setState({ error: false });\n    }\n\n    render(){\n        if(this.state.error){\n            return(\n                <Error onErrorDismiss={this.onErrorDismiss} text={this.state.errorMsg}/>\n            )\n        }else{\n            return(\n                <div className=\"point\" style={{ left: this.state.x + 'px', top: this.state.y + 'px'}}>\n                    <div  className={`point_wrapper ${this.state.x <= 80 ? 'shift' : ''} ${this.state.y <= 90 ? 'bottom' : ''}`}>\n                        {this.state.renderCallOut ? <CallOut x={this.state.x} y={this.state.y} lat={this.state.lat} lon={this.state.lon} updateErrorStatus={this.updateErrorStatus} closeCallOut={this.closeCallOut}/> : ''}\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default Point; ","import React from 'react';\nimport Point from './Point';\n\nclass Map extends React.Component {\n\n    state = {\n        width: 1024,\n        height: 512,\n        zoom: 1,\n        x: null,\n        y: null,\n        PI: Math.PI\n    }\n\n    handleClick = (e) =>{\n        const clientX = e.clientX;\n        const clientY = e.clientY;\n        const domRect = e.currentTarget.getBoundingClientRect();\n        const [domRectX, domRectY ] = [domRect.x, domRect.y];\n        this.setState({x: clientX - domRectX, y: clientY - domRectY});\n    }\n\n    render(){\n        return(\n            <div className=\"map\" style={{maxWidth: this.state.width}}>\n                <img onClick={this.handleClick} src={`https://api.mapbox.com/styles/v1/mapbox/dark-v9/static/0,0,${this.state.zoom}/${this.state.width}x${this.state.height}?access_token=${process.env.REACT_APP_MAPBOX_API_KEY.split(';')[0]}`} alt=\"World Map.\" className=\"map_img\" />\n                { this.state.x && this.state.y ? <Point coordinates={[this.state.x, this.state.y]} PI={this.state.PI}/> : '' }\n            </div>\n        )\n    }\n}\n\nexport default Map;","import React from 'react';\n\nconst Header = () => {\n    return(\n        <header>\n            <h1>Covid-<span className='red'>19</span> Tracker</h1>\n        </header>\n    )\n}\n\nexport default Header;","import React from 'react';\n\nclass Accordion extends React.Component{\n\n    state={\n        collapsed: true\n    }\n\n\n    toggleAccordion(){\n        this.setState({collapsed: this.state.collapsed ? false: true});\n    }\n    \n    render(){\n        return(\n            <div className={`accordion ${this.state.collapsed ? '' : 'open'}`}>\n                <div className=\"accordion_header\">\n                    <button className=\"accordion_toggle\" onClick={() => this.toggleAccordion()}>\n                        <i className=\"fa fa-info-circle\"></i>\n                    </button>\n                </div>\n                <div className=\"accordion_content\">\n                    <p className=\"accordion_content__text\">\n                        Click or touch a Country below, data will be retrieved in real time showing total active cases, deaths, and recoveries. \n                    </p>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Accordion;","import React from 'react';\n\nconst Footer = () => {\n    return(\n        <footer>\n            <span className=\"copyright\">\n                Made with <i className=\"fa fa-heart\"></i> by Eric Smith\n            </span>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from 'react';\nimport Map from './Map';\nimport Header from './Header';\nimport InfoToggle from './Accordion';\nimport Footer from './Footer';\nimport '../styles.scss';\n\nclass App extends React.Component {\n\n    render(){\n        return(\n            <div>\n                <Header />\n                    <div className=\"container\">\n                        <InfoToggle />\n                        <Map />\n                    </div>\n                <Footer />\n            </div>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}